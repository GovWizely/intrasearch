language: ruby
rvm:
- 2.4.5
bundler_args: "--without production"
env:
- ES_VERSION=2.4.6
- CC_TEST_REPORTER_ID=c29d1ae72d0b98bf0c2fbe2798493cd0b069a61c4e97025d47087c53b6617fa4
before_install:
- curl -s https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/${ES_VERSION}/elasticsearch-${ES_VERSION}.tar.gz
  | tar xz -C /tmp || true
- "/tmp/elasticsearch-${ES_VERSION}/bin/elasticsearch -d"
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- ./cc-test-reporter before-build
- cp config/intrasearch.yml.example config/intrasearch.yml
- cp config/restforce.yml.example config/restforce.yml
- cp config/webservices.yml.example config/webservices.yml
after_script:
- ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
